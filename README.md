# address-matching
文章と、(企業名、住所)のリストが与えられた時に、マッチングを行う

## 目的

自然言語で書かれた文章に含まれる(もしくは含まれていないかもしれない)企業名および住所の情報と、あらかじめ与えられた(企業名、住所)の組のリストから、マッチングを行う。

### 入力

* 日本語の文章とユニークID
  * 元々想定されているのは日経プレスリリースの本文

```
NIKPRLRSP038042_07012003        20030106        発表日：２００３年１月７日マイクロドライブを４ギガバイトに拡張　株式会社日立グローバルストレージテクノロジーズ（取締役社長：宮崎哲男）（＊１）は、世界最小のハードディスク装置「マイクロドライブ」の記憶容量を４ギガバイトに拡張し、２００３年秋に発売します。（＊１）　株式会社日立グローバルストレージテクノロジーズはＨｉｔａｃｈｉ　Ｇｌｏｂａｌ　Ｓｔｏｒａｇｅ　Ｔｅｃｈｎｏｌｏｇｉｅｓ（ＣＥＯ：成瀬淳、本社機能：米国カリフォルニア州）の日本法人として、２００３年１月１日に設立されました。同社はハードディスク装置の開発・製造ならびに国内における販売を担当します。　　　マイクロドライブは、標準的なメモリーの規格であるコンパクト・フラッシュＴｙｐｅＩＩの物理的条件を満たしており、外形寸法は幅４２．８ｍｍ×奥行き３６．４ｍｍ×厚さ５．０ｍｍという小型サイズです。米国ＩＢＭ社が２０００年６月に記憶容量１ギガバイトの製品を発売して以来、大容量化を目指して開発を進めてきた結果、小型化技術を活用することで、読み書きヘッドが従来製品の半分のサイズとなる「ＦＥＭＴＯ（＊２）ヘッド」を新たに開発するとともに、ヘッドが円板上を浮上する高さ（フライト・ハイト）も約４０％下げることに成功しました。　また、「ピクシー・ダスト（Ｐｉｘｉｅ　Ｄｕｓｔ）」技術を利用して線記録密度を大幅に向上させています。更に、トラック密度の向上と併せて面記録密度も１００億ビット／平方センチメートルに向上させました。ピクシー・ダストとは、原子三個分相当の超薄型のプラチナに似た貴金属「ルテニウム」でできた層を、三つの磁性層で挟み込む磁気コーティング技術です。ルテニウム層と磁性層を組み合わせることによって、データの保全性を維持したまま高密度でデータを記録できるようになりました。（＊２）　ＦＥＭＴＯ（フェムト）：現在使用されているピコヘッドをさらに縮小化する技術の名称です。　これらの新技術によって、メディア転送速度も従来比約５０％向上し、映像メディアとして急速に普及してきたＤＶＤ（＊３）に匹敵する４ギガバイトの記憶容量を達成しました。この結果、ＰＤＡや携帯電話などの携帯情報機器で動画や音楽などの大容量コンテンツを扱えるようになり、今後、更なる用途の拡大が期待されます。　（＊３）　片面一層の場合。　尚、１月に米国ネバダ州ラスベガスで開催される「Ｉｎｔｅｒｎａｔｉｏｎａｌ　Ｃｏｎｓｕｍｅｒ　Ｅｌｅｃｔｒｏｎｉｃｓ　Ｓｈｏｗ　（ＣＥＳ）」（９～１２日）や「Ｔｈｅ　Ｓｔｏｒａｇｅ　Ｖｉｓｉｏｎｓ　２００３　Ｃｏｎｆｅｒｅｎｃｅ」（７～８日）などの展示会で、マイクロドライブに関する更に詳細な技術説明を実施する予定です。　以上
NIKPRLRSP038060_07012003        20030107        発表日：２００３年１月７日中国で単音・和音　着信メロディ配信サービスヤマハ『美麗鈴（メロリン）』を開始　ヤマハ株式会社（本社：静岡県浜松市中沢町１０－１、社長：伊藤修二）は、中国最大手の携帯電話事業者である、中国移動通信（Ｃｈｉｎａ　Ｍｏｂｉｌｅ　Ｃｏｍｍｕｎｉｃａｔｉｏｎｓ　Ｃｏｒｐｏｒａｔｉｏｎ　〈略称：ＣＭＣＣ〉　本社：　北京市　社長：Ｚｈａｎｇ　Ｌｉｇｕｉ）の地域会社である広東移動通信有限責任公司（Ｇｕａｎｇｄｏｎｇ　Ｍｏｂｉｌｅ　Ｃｏｍｍｕｎｉｃａｔｉｏｎｓ　Ｃｏｒｐｏｒａｔｉｏｎ　〈略称：ＧＭＣＣ）に対し、広東省地域で単音・和音（４和音・１６和音・４０和音）着信メロディ配信サービス、ヤマハ『美麗鈴（メロリン）』を、２００３年１月１日から提供開始しました。　中国ではここ数年で携帯電話の普及が急速に進んでいます。人口約１３億人に対し、現在利用者数は世界第一位の約２億人にのぼり、大きな市場性があると考えられます。今回サービスを開始する広東省は、人口約９０００万人に対し、携帯電話加入者数は約２７００万人と中国国内では最も普及率の高い地域です。加えて商業が盛んで、携帯電話端末によるデータ通信も非常に多いことから、今後の着信メロディ市場のさらなる成長が期待されています。また、当社は既に香港での着信メロディサービスを開始していますが、広東省は地理的にも香港に隣接し、文化の影響を多く受けていることから、これまで培った経験・ノウハウを活用できると考えています。　なお、今回のサービス展開にあたっては、香港での着信メロディ配信事業立ち上げ時から協力関係にあった、ｉｉＬ社（ｉｉＬ　Ｃｏｒｐ　Ｌｔｄ．　本社：香港　社長：Ｋｉｎ　Ｋｏ）を現地でのパートナーとして、中華曲を中心とした現地ヒット曲の選曲、中国語化などの配信運営を行います。『美麗鈴（メロリン）』は、ｉｉＬ社が運営する着信メロディやゲームを提供する携帯電話サイト『夢飛行（中国名）』（英語名：Ｍｏｆｆｙ）から提供されます。　当社は、アジア地域では既に台湾・香港で着信メロディ配信サービスを行っていますが、今回のサービス開始を機に、中国市場でも積極的な展開をしていく方針です。＜サービス概要＞　名称：ヤマハ『美麗鈴（メロリン）　夢飛行』　サービス内容：携帯電話着信メロディ配信サービス　サービス開始：２００３年１月１日（和音端末向け）　　　　　　　　　　　単音端末向けについては２００３年３月予定　利用料金：従量制　単音　１曲＝１元　　　　　　　　和音　１曲＝２元　対応機種：ノキア製端末／ＮＥＣ製端末／パナソニック製端末／　　　　　　　　サムソン製端末／モトローラ製端末／その他中国メーカー製端末　初年度売上目標：３０００万円広東移動通信有限責任公司　会社概要　正式名称：広東移動通信有限責任公司　　　　　　　　Ｇｕａｎｇｄｏｎｇ　Ｍｏｂｉｌｅ　Ｃｏｍｍｕｎｉｃａｔｉｏｎｓ　Ｃｏｒｐｏｒａｔｉｏｎ　設立：１９９８年１月　社長：Ｌｉ　Ｇａｎｇ　契約者数：２１９３万人ｉｉＬ社　会社概要　正式名称：ｉＮＦＯｉＳＬＩＶＥ　Ｃｏｒｐｏｒａｔｉｏｎ　Ｌｔｄ　設立：１９９８年８月　社長：Ｋｉｎ　Ｋｏ　所在地：本社　香港　　　　　　　支社　広州市　北京市　台北市文中の商品名、社名等は各社の商標または登録商標です。
```

* (企業名、住所、ユニークID)の組からなるリスト
  * 元々想定されているユニークIDは証券コード

```
アーキテクツ・スタジオ・ジャパン        東京都港区高輪3-23-14   6085
アーク  大阪府大阪市中央区南本町2-2-9   7873
アークコア      東京都足立区椿2-2-2     3384
```

### 出力

* マッチングされた文章と企業それぞれのユニークIDの組

## 概要

1. 文章から(日本の)住所を抽出
2. 住所が一致し、かつ住所の前方50文字にその企業名を含んでいるかどうかを判定
3. 複数候補が得られた場合は、特定のスコアリングに基づき最もスコアの高いものを出力する

### 考慮されていること

* 企業名の曖昧性排除
  * 全角半角、大文字小文字
  * "・", "株式会社", "ホールディングス"等の揺らぎ

## 細かいこと

### 住所の抽出

* 丁目や番地などの数字は全角のままだと抽出できないことがあるが、以下の理由により半角変換は行わなかった
  * そこまで使う必要は基本的にないという仮定
  * 変換すると文章中の位置がずれてしまい、完全一致検索もできず非常に面倒
* 抽出の際、住所でないものが付いてくることがあるが、それらはその後のgeocodingにおいて都道府県、市区町村、丁目・番地とは扱われにくいため、影響は少ないだろうと考えられる

## 依存関係

* `Geography::AddressExtract::Japan`モジュール(Perl)

```
$ git clone https://github.com/yappo/p5-Geography-AddressExtract-Japan
$ cd Geography-AddressExtract-Japan; cd trunk
Makefile.PL`中の`Test::More`を`'Test::More'`に変更
$ perl Makefile.PL; sudo make install
```